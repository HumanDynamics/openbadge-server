BASE_PATH=`dirname "${BASH_SOURCE}"`
if [[ $SHELL == *"zsh"* ]]
then
    BASE_PATH=`dirname "${(%):-%x}"`
fi
PWD=`pwd`

if [[ "${BASE_PATH}" == "${PWD}" ]]
then

    PYTHONBASE=${PWD}/src
    if [[ "${PYTHONPATH#*$PYTHONBASE}" == "$PYTHONPATH" ]]
    then
        export PYTHONPATH=$PYTHONPATH:${PYTHONBASE}
    fi

    if [[ -e env/bin/activate ]]
    then
        source env/bin/activate
    fi

    export SERVERURL="openbadge.media.mit.edu"

    alias runserver="python src/manage.py runserver 0.0.0.0:8000 --settings=project.localsettings"
    alias migrate="python src/manage.py migrate --noinput --settings=project.localsettings"
    alias makemigrations="python src/manage.py makemigrations --settings=project.localsettings"
    alias collectstatic="python src/manage.py collectstatic --noinput --settings=project.localsettings"
    alias test="(cd src && python manage.py test)"
    alias setup_server="fab -f deploy/fabric/deploy.py -H $SERVERURL setup_server"
    alias deploy="fab -f deploy/fabric/deploy.py -H $SERVERURL deploy"
    alias ssh_server="ssh -i deploy/fabric/keys/sshkey deploy@$SERVERURL"
    alias tail_log="fab -f deploy/fabric/deploy -H $SERVERURL tail_log"
fi



